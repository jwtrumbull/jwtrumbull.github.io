<!DOCTYPE html>
<html>
<head>
	<link class="jsbin" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1/themes/base/jquery-ui.css" rel="stylesheet" type="text/css" />
<script class="jsbin" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script class="jsbin" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.0/jquery-ui.min.js"></script>
<div class="navbar">
  	<a href="index.html">Home</a>
    <div class="dropdown">
    <button class="dropbtn" id="toggle">Instructions</button>
  </div>
</div>
<h1 class="head">Fearless Scoot</h1>
</head>
<body>
	<style>
  article, aside, figure, footer, header, hgroup,
  menu, nav, section { display: block; }
</style>
	<link rel="stylesheet" href="karin.css">

	<input type='file' class="upload" onclick="disappear()">


<canvas id="myCanvas" width="500" height="500">
Your browser does not support the HTML5 canvas tag.
</canvas>

<p name ="text" id="text">Your image will be here.</p>

<!--<button class="download"><i class="fa fa-download"></i> Download</button>
-->

<script>
function disappear() {
  var x = document.getElementById("text");
  if (x.innerHTML === "Your image will be here.") {
    x.innerHTML = "";
  } else {
    x.innerHTML = "";
  }
};


$("input").change(function(e) {

    for (var i = 0; i < e.originalEvent.srcElement.files.length; i++) {
        var file = e.originalEvent.srcElement.files[i];

        var img = document.createElement("img");
        var reader = new FileReader();

        reader.onloadend = function() {
             img.src = reader.result;
        }
        reader.readAsDataURL(file);

				var width = img.width;
			 	var height = img.height;
			 	//alert(this.width + 'x' + this.height);

				var c=document.getElementById("myCanvas");
				var ctx=c.getContext("2d");
				var imageObj1 = new Image();
				var imageObj2 = new Image();
				imageObj1.src = "heart.png"
				imageObj1.onload = function() {
				   ctx.drawImage(imageObj1, 0, 0, 500, 500);
				   imageObj2.src = img.src;
				   imageObj2.onload = function() {
						ctx.globalAlpha = 0.5;
				      ctx.drawImage(imageObj2, 0, 0, 500, 500);
				      var img = c.toDataURL("image/png");
							document.getElementById("myImg") = img;
							var button = document.getElementById('btn-download');
button.addEventListener('click', function (e) {
    var dataURL = canvas.toDataURL('image/png');
    button.href = dataURL;
});
				   }

				};
    }
});
</script>

<div id="content">
  <p>
		1. Click on choose file, and select the image from your desktop.<br>
		2. Your image will go into the box and will be overlayed with an orange heart.<br>
		3. Right click on the image in the box and click save image as...<br>
		4. The image saved will be a bit more colored than the image in the box so make sure you check it.<br><br>
		The picture will convert your image to 500x500 to match the size of the heart. I am looking into other resizing methods to make it look better.
		<br><br><br><br><br><br><br><br><br><br>
	<p>
</div>

<script>
var toggle  = document.getElementById("toggle");
var content = document.getElementById("content");

toggle.addEventListener("click", function() {
  content.style.display = (content.dataset.toggled ^= 1) ? "block" : "none";
});
</script>
</body>
</html>
